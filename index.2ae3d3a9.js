const $app=document.getElementById("app"),$observe=document.getElementById("observe"),API="https://api.escuelajs.co/api/v1/products";let intersectionObserver;const setPaginationInStorage=(e,t)=>{const n={offset:e,limit:t};localStorage.setItem("pagination",JSON.stringify(n))},getData=e=>{const t=JSON.parse(localStorage.getItem("pagination")),n=`${e}?offset=${t.offset}&limit=${t.limit}`;fetch(n).then((e=>e.json())).then((e=>{let t=e.map((e=>`\n            <article class="Card">\n              <img src="${e.images[0]}" alt="${e.title}">\n              <h2>\n                ${e.title}\n                <small>${e.price}</small>\n              </h2>\n            </article>\n          `)).join(""),n=document.createElement("section");n.classList.add("Items"),n.innerHTML=t,$app.appendChild(n)})).catch((e=>console.log(e)))},loadData=async(e,t)=>{if(setPaginationInStorage(e,t),e<=200)await getData(API);else{intersectionObserver.unobserve($observe);let e=document.createElement("section");e.classList.add("Center"),e.innerHTML="\n      <h1>Todos los productos Obtenidos</h1>\n    ",$app.appendChild(e)}};function createObserver(){intersectionObserver=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){const e=JSON.parse(localStorage.getItem("pagination"));loadData(e.offset+e.limit,e.limit)}}))}),{rootMargin:"0px 0px 100% 0px",threshold:1}),intersectionObserver.observe($observe)}window.addEventListener("load",(e=>{loadData(5,10).then((()=>{createObserver()}))}),!1);
//# sourceMappingURL=index.2ae3d3a9.js.map
