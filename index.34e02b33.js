const $app=document.getElementById("app"),$observe=document.getElementById("observe"),API="https://api.escuelajs.co/api/v1/products";let intersectionObserver;const PAGINATION_LIMIT=10,setPaginationInStorage=e=>{localStorage.setItem("pagination",e)},getData=e=>{const t=JSON.parse(localStorage.getItem("pagination"));fetch(`${e}?offset=${t}&limit=10`).then((e=>e.json())).then((e=>{let t=e.map((e=>`\n            <article class="Card">\n              <img src="${e.images[0]}" alt="${e.title}">\n              <h2>\n                ${e.title}\n                <small>${e.price}</small>\n              </h2>\n            </article>\n          `)).join(""),n=document.createElement("section");n.classList.add("Items"),n.innerHTML=t,$app.appendChild(n)})).catch((e=>console.log(e)))},loadData=async e=>{if(setPaginationInStorage(e),console.log(e),e<=200)await getData(API);else{intersectionObserver.unobserve($observe);let e=document.createElement("section");e.classList.add("Center"),e.innerHTML="\n      <h1>Todos los productos Obtenidos</h1>\n    ",$app.appendChild(e)}};function createObserver(){intersectionObserver=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){const e=JSON.parse(localStorage.getItem("pagination"))||0;loadData(e+10)}}))}),{rootMargin:"0px 0px 100% 0px",threshold:1}),intersectionObserver.observe($observe)}window.addEventListener("load",(e=>{createObserver()}),!1),window.addEventListener("beforeunload",(function(){return localStorage.clear(),setPaginationInStorage(0)})),window.addEventListener("beforereload",(function(){return localStorage.clear(),setPaginationInStorage(0)}));
//# sourceMappingURL=index.34e02b33.js.map
