{"mappings":"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","sources":["src/index.js"],"sourcesContent":["const $app = document.getElementById(\"app\");\r\nconst $observe = document.getElementById(\"observe\");\r\nconst API = \"https://api.escuelajs.co/api/v1/products\";\r\n\r\nlet intersectionObserver;\r\n\r\nconst setPaginationInStorage = (offset, limit) => {\r\n  const pagination = {\r\n    offset,\r\n    limit,\r\n  };\r\n  localStorage.setItem(\"pagination\", JSON.stringify(pagination));\r\n};\r\n\r\nconst getData = (api) => {\r\n  const pagination = JSON.parse(localStorage.getItem(\"pagination\"));\r\n  const apiUrl = `${api}?offset=${pagination.offset}&limit=${pagination.limit}`;\r\n  fetch(apiUrl)\r\n    .then((response) => response.json())\r\n    .then((products) => {\r\n      let output = products\r\n        .map(\r\n          (product) =>\r\n            `\r\n            <article class=\"Card\">\r\n              <img src=\"${product.images[0]}\" alt=\"${product.title}\">\r\n              <h2>\r\n                ${product.title}\r\n                <small>${product.price}</small>\r\n              </h2>\r\n            </article>\r\n          `\r\n        )\r\n        .join(\"\");\r\n      let newItem = document.createElement(\"section\");\r\n      newItem.classList.add(\"Items\");\r\n      newItem.innerHTML = output;\r\n      $app.appendChild(newItem);\r\n    })\r\n    .catch((error) => console.log(error));\r\n};\r\n\r\nconst loadData = async (offset, limit) => {\r\n  setPaginationInStorage(offset, limit);\r\n  if (offset <= 200) {\r\n    await getData(API);\r\n  } else {\r\n    intersectionObserver.unobserve($observe);\r\n    let endOfItemsMessage = document.createElement(\"section\");\r\n    endOfItemsMessage.classList.add(\"Center\");\r\n    endOfItemsMessage.innerHTML = `\r\n      <h1>Todos los productos Obtenidos</h1>\r\n    `;\r\n    $app.appendChild(endOfItemsMessage);\r\n  }\r\n};\r\n\r\nfunction createObserver() {\r\n  intersectionObserver = new IntersectionObserver(\r\n    (entries) => {\r\n      entries.forEach((entry) => {\r\n        if (entry.isIntersecting) {\r\n          const actualPagination = JSON.parse(\r\n            localStorage.getItem(\"pagination\")\r\n          );\r\n          loadData(\r\n            actualPagination.offset + actualPagination.limit,\r\n            actualPagination.limit\r\n          );\r\n        }\r\n      });\r\n    },\r\n    {\r\n      rootMargin: \"0px 0px 100% 0px\",\r\n      threshold: 1.0,\r\n    }\r\n  );\r\n  intersectionObserver.observe($observe);\r\n}\r\n\r\nwindow.addEventListener(\r\n  \"load\",\r\n  (event) => {\r\n    loadData(5, 10).then(() => {\r\n      createObserver();\r\n    });\r\n  },\r\n  false\r\n);\r\n"],"names":[],"version":3,"file":"index.579125c3.js.map","sourceRoot":"/__parcel_source_root/"}